<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>151. Reverse Words in a String - Leetbook</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Solutions</li><li class="chapter-item expanded "><div>Easy</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../easy-problems/1.html">1. Two Sum</a></li><li class="chapter-item expanded "><a href="../easy-problems/9.html">9. Palindrome Number</a></li><li class="chapter-item expanded "><a href="../easy-problems/13.html">13. Roman to Integer</a></li><li class="chapter-item expanded "><a href="../easy-problems/20.html">20. Valid Parentheses</a></li><li class="chapter-item expanded "><a href="../easy-problems/21.html">21. Merge Two Sorted Lists</a></li><li class="chapter-item expanded "><a href="../easy-problems/70.html">70. Climbing Stairs</a></li><li class="chapter-item expanded "><a href="../easy-problems/100.html">100. Same Tree</a></li><li class="chapter-item expanded "><a href="../easy-problems/112.html">112. Path Sum</a></li><li class="chapter-item expanded "><a href="../easy-problems/118.html">118. Pascal's Triangle</a></li><li class="chapter-item expanded "><a href="../easy-problems/125.html">125. Valid Palindrome</a></li><li class="chapter-item expanded "><a href="../easy-problems/193.html">193. Valid Phone Numbers</a></li><li class="chapter-item expanded "><a href="../easy-problems/195.html">195. Tenth Line</a></li><li class="chapter-item expanded "><a href="../easy-problems/206.html">206. Reverse Linked Lists</a></li><li class="chapter-item expanded "><a href="../easy-problems/217.html">217. Contains Duplicate</a></li><li class="chapter-item expanded "><a href="../easy-problems/231.html">231. Power of Two</a></li><li class="chapter-item expanded "><a href="../easy-problems/234.html">234. Palindrome Linked List</a></li><li class="chapter-item expanded "><a href="../easy-problems/292.html">292. Nim Game</a></li><li class="chapter-item expanded "><a href="../easy-problems/344.html">344. Reverse String</a></li><li class="chapter-item expanded "><a href="../easy-problems/374.html">374. Guess Number Higher or Lower</a></li><li class="chapter-item expanded "><a href="../easy-problems/876.html">876.	Middle of the Linked List</a></li><li class="chapter-item expanded "><a href="../easy-problems/1290.html">1290. Convert Binary Number in a Linked List to Integer</a></li><li class="chapter-item expanded "><a href="../easy-problems/1822.html">1822. Sign of the Product of an Array</a></li><li class="chapter-item expanded "><a href="../easy-problems/1929.html">1929. Concatenation of Array</a></li><li class="chapter-item expanded "><a href="../easy-problems/2331.html">2331. Evaluate Boolean Binary Tree</a></li></ol></li><li class="chapter-item expanded "><div>Medium</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../medium-problems/2.html">2. Add Two Numbers</a></li><li class="chapter-item expanded "><a href="../medium-problems/3.html">3. Longest Substring Without Repeating Characters</a></li><li class="chapter-item expanded "><a href="../medium-problems/6.html">6. Zigzag Conversion</a></li><li class="chapter-item expanded "><a href="../medium-problems/7.html">7. Reverse Integer</a></li><li class="chapter-item expanded "><a href="../medium-problems/17.html">17. Letter Combination of a Phone Number</a></li><li class="chapter-item expanded "><a href="../medium-problems/24.html">24. Swap Nodes in Pairs</a></li><li class="chapter-item expanded "><a href="../medium-problems/50.html">50. Pow(x, n)</a></li><li class="chapter-item expanded "><a href="../medium-problems/55.html">55. Jump Game</a></li><li class="chapter-item expanded "><a href="../medium-problems/78.html">78. Subsets</a></li><li class="chapter-item expanded "><a href="../medium-problems/98.html">98. Validate Binary Search Tree</a></li><li class="chapter-item expanded "><a href="../medium-problems/113.html">113. Path Sum II</a></li><li class="chapter-item expanded "><a href="../medium-problems/143.html">143. Reorder List</a></li><li class="chapter-item expanded "><a href="../medium-problems/150.html">150. Evaluate Reverse Polish Notation</a></li><li class="chapter-item expanded "><a href="../medium-problems/151.html" class="active">151. Reverse Words in a String</a></li><li class="chapter-item expanded "><a href="../medium-problems/179.html">179. Largest Number</a></li><li class="chapter-item expanded "><a href="../medium-problems/322.html">322. Coin Change</a></li><li class="chapter-item expanded "><a href="../medium-problems/347.html">347. Top K Frequent Elements</a></li><li class="chapter-item expanded "><a href="../medium-problems/371.html">371. Sum of Two Integers</a></li><li class="chapter-item expanded "><a href="../medium-problems/518.html">518. Coin Change II</a></li><li class="chapter-item expanded "><a href="../medium-problems/435.html">435. Non-overlapping Intervals</a></li><li class="chapter-item expanded "><a href="../medium-problems/2095.html">2095. Delete the Middle Node of a Linked List</a></li></ol></li><li class="chapter-item expanded "><div>Hard</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../hard-problems/60.html">60. Permutation Sequence</a></li><li class="chapter-item expanded "><a href="../hard-problems/65.html">65. Valid Number</a></li><li class="chapter-item expanded "><a href="../hard-problems/239.html">239. Sliding Window Maximum</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Solutions w/o explanation</li><li class="chapter-item expanded "><div>Easy</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../easy-problems-no-explain/26.html">26. Remove Duplicates from Sorted Array</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/83.html">83. Remove Duplicates from Sorted List</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/94.html">94. Binary Tree Inorder Traversal</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/111.html">111. Minimum Depth of Binary Tree</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/191.html">191. Number of 1 Bits</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/141.html">141. Linked List Cycle</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/144.html">144. Binary Tree Preorder Traversal</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/145.html">145. Binary Tree Postorder Traversal</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/226.html">226. Invert Binary Tree</a></li><li class="chapter-item expanded "><a href="../easy-problems-no-explain/897.html">897. Increasing Order Search Tree</a></li></ol></li><li class="chapter-item expanded "><div>Medium</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../medium-problems-no-explain/19.html">19. Remove Nth Node From End of List</a></li><li class="chapter-item expanded "><a href="../medium-problems-no-explain/46.html">46. Permutations</a></li><li class="chapter-item expanded "><a href="../medium-problems-no-explain/207.html">207. Course Schedule</a></li><li class="chapter-item expanded "><a href="../medium-problems-no-explain/210.html">210. Course Schedule II</a></li><li class="chapter-item expanded "><a href="../medium-problems-no-explain/237.html">237. Delete Node in a Linked List</a></li></ol></li><li class="chapter-item expanded "><div>Hard</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../hard-problems-no-explain/68.html">68. Text Justification</a></li><li class="chapter-item expanded "><a href="../hard-problems-no-explain/295.html">295. Find Median from Data Stream</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Leetbook</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="151-reverse-words-in-a-string"><a class="header" href="#151-reverse-words-in-a-string">151. Reverse Words in a String</a></h1>
<h2 id="description-of-the-problem"><a class="header" href="#description-of-the-problem">Description of the Problem</a></h2>
<p>Given an input string <code>s</code>, reverse the order of the <strong>words</strong>.</p>
<p>A <strong>word</strong> is defined as a sequence of non-space characters. The <strong>words</strong> in s will be separated by at least one space.</p>
<p>Return <em>a string of the words in reverse order concatenated by a single space</em>.</p>
<p><strong>Note</strong> that <code>s</code> may contain leading or trailing spaces or multiple spaces between two words. The returned string should only have a single space separating the words. Do not include any extra spaces.</p>
<p><strong>Example 1:</strong></p>
<pre><code>Input: s = &quot;the sky is blue&quot;
Output: &quot;blue is sky the&quot;
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code>Input: s = &quot;  hello world  &quot;
Output: &quot;world hello&quot;
Explanation: Your reversed string should not contain leading or trailing spaces.
</code></pre>
<p><strong>Example 3:</strong></p>
<pre><code>Input: s = &quot;a good   example&quot;
Output: &quot;example good a&quot;
Explanation: You need to reduce multiple spaces between two words to a single space in the reversed string.
</code></pre>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= s.length &lt;= 104</code></li>
<li><code>s</code> contains English letters (upper-case and lower-case), digits, and spaces ' '.</li>
<li>There is at least one word in <code>s</code>.</li>
</ul>
<p>Follow-up: If the string data type is mutable in your language, can you solve it in-place with <code>O(1)</code> extra space?</p>
<h2 id="solution"><a class="header" href="#solution">Solution</a></h2>
<h3 id="explanation"><a class="header" href="#explanation">Explanation</a></h3>
<p>Simple Idea:</p>
<ul>
<li>To reverse each word in a string, do mirroring to each word and then do mirroring to the whole string.</li>
<li>To do mirroring for each word, we have to scan each word (using sliding windows, i.e. tokenise)</li>
<li>The follow-up question requires us to do almost any operations in-place. We can first copy each token to suitable place by sliding windows method. For example, <code>____ABC</code> becomes <code>ABC_ABC</code>.</li>
</ul>
<p>Reminder:</p>
<ul>
<li>(*) To fullfill the follow-up question, do not create too much copy of the <code>String</code>. Keep in mind that even if some methods/functions do not have <code>new</code> keyword, the code behind these methods/functions may contain <code>new</code> keyword in their implementation (i.e. they use extra space). For example, in Java, <code>.substring(i, j)</code> will create new <code>String</code> in Heap. To know more about this, please look at the source code. 
<ul>
<li>Rust provides source code in their offcial website. </li>
<li>You can also look at the source code of Java via IDE.</li>
</ul>
</li>
<li>In my opinion, the key idea of the problems is to illistrate you are able to acheive \( O(1) \) conceptually. It is not necessary to implement it so carefully.</li>
</ul>
<p><strong>My definition to &quot;extra/auxiliary space&quot; is excluding input space and output space</strong></p>
<h3 id="code-rust"><a class="header" href="#code-rust">Code (Rust)</a></h3>
<pre><code class="language-Rust">impl Solution {
    pub fn reverse_words(s: String) -&gt; String {
        let space_in_u8 = 32;

        // According to RustDoc: &quot;This consumes the `String`, so we do not need to copy its contents&quot;
        // i.e. convert it into Vec&lt;u8&gt; costs O(1) Space
        let mut v = s.into_bytes();

        // i, j for sliding window,
        // k is location of cell to be filled-in
        let (mut i, mut j, mut k, n) = (0,0,0,v.len());
        while j &lt; n {
            match (v[i] == space_in_u8, v[j]==space_in_u8){

                // Case 1: Sliding window contains only space, move two pointers
                (true, true) =&gt; {i+=1; j+=1;},

                // Impossible case
                (true, false) =&gt; {panic!(&quot;Reaches impossible case&quot;);},

                // Case 2: sliding window complete the scanning of a word
                (false, true) =&gt; {

                    // If the &quot;current result&quot; has some word, append space
                    if k &gt; 0 {
                        v[k] = space_in_u8;
                        k+=1;
                    }

                    // v[k..k+j-i] = v[i..j].reverse()
                    Solution::copy_and_reverse(&amp;mut v, i, j, &amp;mut k);

                    // reset pointer location by right j by 1, i points to where j locates
                    j+=1;
                    i=j;
                },

                // Case 3: Sliding window contains only characters
                // It may not complete the scanning
                (false, false) =&gt; {
                    j+=1;
                    // If j reaches the end of string, do copy_and_reverse
                    if j == n {
                        if k &gt; 0 {
                            v[k] = space_in_u8;
                            k+=1;
                        }
                        Solution::copy_and_reverse(&amp;mut v, i, j, &amp;mut k);
                    }
                }

            }
        }

        v.truncate(k); // cut unnecessary characters 
        Solution::reverse_string(&amp;mut v, 0, k); // reverse the whole string

        // Convert Vec&lt;u8&gt; back to String
        // It costs O(1) according to String implmentation (see source code of Rust)
        // i.e. give ownership of Vec&lt;u8&gt; to String Struct
        return unsafe { String::from_utf8_unchecked(v) }; 
    }

    // v[k..k+j-i] = v=[i..j].reverse()
    fn copy_and_reverse(v: &amp;mut Vec&lt;u8&gt;, begin: usize, end: usize, k: &amp;mut usize){
        let k_origin = *k;

        // v[k..k+j-i] = v=[i..j]
        for i in (begin..end){
            v[*k] = v[i];
            *k +=1;
        }

        Solution::reverse_string(v, k_origin, k_origin+end-begin);
    }

    // v[k..k+j-i].reverse()
    fn reverse_string(v: &amp;mut Vec&lt;u8&gt;, begin: usize, end: usize){
        let (mut i, mut j) = (begin, end - 1);
        while i &lt; j {
            let tmp = v[i];
            v[i] = v[j];
            v[j] = tmp;
            i+=1;
            j-=1;
        }
    }
}
</code></pre>
<h3 id="complexity-n-is-length-of-the-string"><a class="header" href="#complexity-n-is-length-of-the-string">Complexity (\(n\) is length of the string)</a></h3>
<p><strong>Time complexity:</strong></p>
<ul>
<li>\( O(2n) \)
<ul>
<li>Mirroring the whole string cost \( n / 2 \)</li>
<li>Copying and mirroring a token cost \( m + m / 2 \) where m is the length of token. Since sum of the length of tokens does not exceed \(n\). The total cost less than \( 3n/2 \)</li>
<li>The combined complexity is \( O(2n) \)</li>
</ul>
</li>
</ul>
<p><strong>Auxiliary Space:</strong></p>
<ul>
<li>\( O(1) \)
<ul>
<li>Depends on Programming Language and implementation</li>
<li>Conceptually it can acheive O(1) Space</li>
</ul>
</li>
</ul>
<h2 id="further-discussion"><a class="header" href="#further-discussion">Further Discussion</a></h2>
<h3 id="limitation-of-a-programming-language-and-turing-equivalence"><a class="header" href="#limitation-of-a-programming-language-and-turing-equivalence">Limitation of a Programming Language and Turing Equivalence(?)</a></h3>
<p>Some people argue that each language has its limitation. For instance, Java cannot actually acheive \(O(1)\) extra space in this problem. </p>
<p>To some extent, I will agree. Theoretically, however, if each programming language simluates <strong>Universal Turing Machine</strong>, they should be equivalent. This implies that there is no operation Rust can do but Java can't. The only matter is the cost for one language to simulate another. Just like to simulates Two-Tape Turing Machine by the One-Tape, we need more steps/operations in One-Tape Turing Machine.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../medium-problems/150.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../medium-problems/179.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../medium-problems/150.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../medium-problems/179.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
